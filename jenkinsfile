pipeline {
    agent any
    stages {
        stage("Test") {
			steps {
				sh  'cd /var/lib/jenkins/workspace/junitreportgeneration/target/surefire-reports'
				sh 'touch *.xml'
			}
		}
        stage("build") {
            steps {
                 sh  'mvn -Dmaven.test.skip=true surefire-report:report'
            }
        }
    }
    post {
        always {
            archiveArtifacts "target/**/*"
            junit '**/surefire-reports/*.xml' 
          
             
         }  
        }
		publishHTML(target:  [
			allowMissing: false, 
			alwaysLinkToLastBuild: false, 
			keepAll: false, 
			reportDir: 'site', 
			reportFiles: 'surefire-report.html', 
			reportName: 'HTML Report', 
			reportTitles: 'HML Report'
			])
    }