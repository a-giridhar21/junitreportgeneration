pipeline {
    agent any
    stages {
        stage("Test") {
			steps {
				
				slackSend channel: 'junittesting', message: 'Starting'
				sh 'mvn surefire:test surefire-report:report'
				
				//sh  'cd /var/lib/jenkins/workspace/junitreportgeneration/target/surefire-reports'
				//sh 'touch *.xml'
			}
		}
        stage("build") {
            steps {
				slackSend channel: 'junittesting', message: 'Building'
                 sh  'mvn -Dmaven.test.skip=true surefire-report:report'
            }
			steps {
				slackSend channel: 'junittesting general', color: 'Good', message: 'Welcome to jenkins Slack', teamDomain: 'junittesting', tokenCredentialId: 'jenkins-slack-integration'
			}
        }
    }
    post {
        always {
            archiveArtifacts "target/**/*"
            junit '**/surefire-reports/*.xml' 
			
			
         }  
		 
        }	
}